dependencies:
  pre:
    - rm -rf ~/.go_workspace/src/github.com/launchdarkly/go-client
    - mkdir -p ~/.go_workspace/src/github.com/launchdarkly/
    - ln -s ~/go-client ~/.go_workspace/src/github.com/launchdarkly/go-client
    - go get github.com/tools/godep
    - go get gopkg.in/tools/godep.v74 # lock down our version of godep
    - ln -sf ~/.go_workspace/bin/godep.v74 ~/.go_workspace/bin/godep
    - go get github.com/laher/goxc # install goxc. can't use a locked down version yet.
    - go version
    - godep version
    - goxc -version
    # FGT is a utility that exits with 1 whenever any stderr/stdout output is recieved.
    - go get github.com/GeertJohan/fgt
  override:
    - fgt go fmt ./...
    - fgt go vet ./...
    - godep go build -race ./...

test:
  override:
    - godep go test ./... -v
