[
  {
    "name": "Prerequisite..",
    "featureKey": "validFeatureKey",
    "defaultValue": "DefaultValue",
    "usersAndExpectations": [
      {
        "expectedValue": "FallthroughValue",
        "expectError": false,
        "user": {
          "key": "key"
        }
      },
      {
        "expectedValue": "DefaultValue",
        "expectError": true,
        "user": {
          "key": null
        }
      }
    ],
    "featureFlags": [
      {
        "key": "validFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereqFeatureKey",
            "variation": 1
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 0
        },
        "offVariation": null,
        "variations": [
          "FallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereqFeatureKey",
        "version": 0,
        "on": true,
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "prereqFallthroughValue"
        ],
        "deleted": false
      }
    ]
  },
  {
    "name": "Prerequisite cycle detection: root->root",
    "featureKey": "validFeatureKey",
    "defaultValue": "DefaultValue",
    "usersAndExpectations": [
      {
        "expectedValue": "DefaultValue",
        "expectError": true,
        "user": {
          "key": "key"
        }
      }
    ],
    "featureFlags": [
      {
        "key": "validFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "validFeatureKey",
            "variation": 0
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 0
        },
        "offVariation": null,
        "variations": [
          "FallthroughValue"
        ],
        "deleted": false
      }
    ]
  },
  {
    "name": "Prerequisite cycle detection: root->prereq->root",
    "featureKey": "validFeatureKey",
    "defaultValue": "DefaultValue",
    "usersAndExpectations": [
      {
        "expectedValue": "DefaultValue",
        "expectError": true,
        "user": {
          "key": "key"
        }
      }
    ],
    "featureFlags": [
      {
        "key": "validFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereqFeatureKey",
            "variation": 1
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 0
        },
        "offVariation": null,
        "variations": [
          "FallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereqFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "validFeatureKey",
            "variation": 0
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "prereqFallthroughValue"
        ],
        "deleted": false
      }
    ]
  },
  {
    "name": "Prerequisite cycle detection: root->prereq1->prereq2->prereq1",
    "featureKey": "validFeatureKey",
    "defaultValue": "DefaultValue",
    "usersAndExpectations": [
      {
        "expectedValue": "DefaultValue",
        "expectError": true,
        "user": {
          "key": "key"
        }
      }
    ],
    "featureFlags": [
      {
        "key": "validFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereq1FeatureKey",
            "variation": 0
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 0
        },
        "offVariation": null,
        "variations": [
          "FallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereq1FeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereq2FeatureKey",
            "variation": 0
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "prereq1FallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereq2FeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereq1FeatureKey",
            "variation": 0
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "prereq2FallthroughValue"
        ],
        "deleted": false
      }
    ]
  },
  {
    "name": "Prerequisites: root->prereq1a + root->prereq1b->prereq1a",
    "featureKey": "validFeatureKey",
    "defaultValue": "DefaultValue",
    "usersAndExpectations": [
      {
        "expectedValue": "FallthroughValue",
        "expectError": false,
        "user": {
          "key": "keyWithMatchingPrereqs"
        }
      },
      {
        "expectedValue": "DefaultValue",
        "expectError": false,
        "user": {
          "key": "keyNotMatchingPrereqs",
          "email": "notMatchingPrerequisite@spaghett.io"
        }
      }
    ],
    "featureFlags": [
      {
        "key": "validFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereq1aFeatureKey",
            "variation": 1
          },
          {
            "key": "prereq1bFeatureKey",
            "variation": 1
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "FallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereq1aFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [
          {
            "clauses": [
              {
                "attribute": "email",
                "op": "endsWith",
                "values": [
                  "spaghett.io"
                ],
                "negate": false
              }
            ],
            "variation": 0,
            "rollout": null
          }
        ],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "prereq1aFallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereq1bFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereq1aFeatureKey",
            "variation": 1
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "prereq2FallthroughValue"
        ],
        "deleted": false
      }
    ]
  },
  {
    "name": "Prerequisite with offVariation = expected variation is met",
    "featureKey": "validFeatureKey",
    "defaultValue": "DefaultValue",
    "usersAndExpectations": [
      {
        "expectedValue": "FallthroughValue",
        "expectError": false,
        "user": {
          "key": "key"
        }
      }
    ],
    "featureFlags": [
      {
        "key": "validFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereqWithOffVariationFeatureKey",
            "variation": 1
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "FallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereqWithOffVariationFeatureKey",
        "version": 0,
        "on": false,
        "prerequisites": [],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": 1,
        "variations": [
          "prereqOffFallthroughValue",
          "prereqOffVariation"
        ],
        "deleted": false
      }
    ]
  },
  {
    "name": "Prerequisite with offVariation not set",
    "featureKey": "validFeatureKey",
    "defaultValue": "DefaultValue",
    "usersAndExpectations": [
      {
        "expectedValue": "DefaultValue",
        "expectError": false,
        "user": {
          "key": "key"
        }
      }
    ],
    "featureFlags": [
      {
        "key": "validFeatureKey",
        "version": 0,
        "on": true,
        "prerequisites": [
          {
            "key": "prereqWithoutOffVariationFeatureKey",
            "variation": 1
          }
        ],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "NO",
          "FallthroughValue"
        ],
        "deleted": false
      },
      {
        "key": "prereqWithoutOffVariationFeatureKey",
        "version": 0,
        "on": false,
        "prerequisites": [],
        "salt": "",
        "sel": "",
        "targets": [],
        "rules": [],
        "fallthrough": {
          "variation": 1
        },
        "offVariation": null,
        "variations": [
          "prereqOffFallthroughValue"
        ],
        "deleted": false
      }
    ]
  }
]